# WebView 编辑器 - 功能说明

## 概述

我们为您的 Prompt Manager 插件添加了全新的 WebView 编辑器，提供更好的编辑体验，替代原有的分步弹窗编辑方式。

## 新功能特性

### 1. 统一编辑界面
- **一个页面完成所有编辑**：不再需要在多个弹窗中分别输入标题、内容、描述等
- **实时预览**：在编辑内容时可以实时查看效果
- **现代化界面**：使用 VSCode 原生样式，与编辑器环境完全融合

### 2. 增强的编辑体验
- **大文本框**：内容编辑区域更大，支持多行编辑
- **等宽字体**：内容编辑使用等宽字体，更适合编写 Prompt
- **自动调整**：文本框支持垂直缩放，适应不同长度的内容

### 3. 标签管理
- **可视化标签**：标签以徽章形式显示，可以直观地看到和管理
- **动态添加**：按 Enter 键即可添加新标签
- **一键删除**：点击 × 按钮即可删除标签

### 4. 分类管理
- **下拉选择**：从下拉菜单中选择已有分类
- **快速创建**：点击"创建新分类"按钮即可快速创建新分类
- **实时刷新**：创建分类后自动刷新分类列表

### 5. 用户配置
- **编辑器选择**：用户可在设置中选择使用 WebView 编辑器或传统弹窗编辑器
- **默认设置**：默认使用 WebView 编辑器（推荐）
- **向下兼容**：完全兼容原有的弹窗编辑器

## 使用方法

### 1. 基本使用
1. 打开 Prompt Manager
2. 点击"添加新Prompt"或"编辑现有Prompt"
3. 在 WebView 编辑器中填写信息：
   - 标题（必填）
   - 内容（必填）
   - 描述（可选）
   - 分类（可选）
   - 标签（可选）
4. 点击"保存"按钮完成编辑

### 2. 标签操作
- 在标签输入框中输入标签名称
- 按 Enter 键添加标签
- 点击已有标签的 × 按钮删除标签

### 3. 分类操作
- 从下拉菜单选择已有分类
- 点击"创建新分类"按钮创建新分类
- 点击"刷新分类"按钮更新分类列表

### 4. 配置选项
1. 打开 VSCode 设置
2. 搜索 "Prompt Manager"
3. 在 "Editor Type" 中选择：
   - `webview`：使用 WebView 编辑器（推荐）
   - `popup`：使用传统弹窗编辑器

## 技术特性

### 1. 现代化技术栈
- **VSCode WebView API**：使用 VSCode 原生的 WebView 技术
- **响应式设计**：支持不同屏幕尺寸
- **实时通信**：编辑器与扩展之间的双向消息通信

### 2. 性能优化
- **单例模式**：确保同时只有一个编辑器实例
- **内存管理**：编辑器关闭时自动释放资源
- **懒加载**：只在需要时加载编辑器

### 3. 错误处理
- **参数验证**：确保必填字段不为空
- **错误提示**：清晰的错误信息显示
- **容错机制**：WebView 编辑器出错时自动回退到弹窗编辑器

## 兼容性

### 1. 向后兼容
- 完全兼容现有的 Prompt 数据格式
- 支持从旧版本无缝升级
- 保留原有的弹窗编辑器选项

### 2. 跨平台支持
- Windows
- macOS
- Linux

### 3. VSCode 版本支持
- 最低支持 VSCode 1.60.0
- 推荐使用最新版本以获得最佳体验

## 故障排除

### 1. 编辑器无法打开
- 检查 VSCode 版本是否支持 WebView
- 尝试切换到弹窗编辑器模式
- 重启 VSCode

### 2. 保存失败
- 确保标题和内容不为空
- 检查是否有特殊字符导致的问题
- 查看 VSCode 开发者工具的控制台输出

### 3. 分类创建失败
- 确保分类名称不为空
- 检查是否已存在同名分类
- 尝试刷新分类列表

## 反馈与建议

如果您在使用过程中遇到任何问题或有改进建议，请：

1. 打开 VSCode 开发者工具查看控制台错误
2. 提供详细的错误信息和复现步骤
3. 说明您的环境信息（VSCode版本、操作系统等）

---

**注意**：新的 WebView 编辑器是默认启用的，如果您prefer使用传统的弹窗编辑器，可以在设置中进行切换。 